<h1>Search Results</h1>

<div class="button_by_search_result">
  <button class="btn article_btn">記事</button>
  <button class="btn user_btn">ユーザー</button>
</div>

<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script>
$(function() {
  $('.article_btn').on('click', function(){
    $('.searched_articles').show();
    $('.searched_users').hide();
  });
});
$(function() {
  $('.user_btn').on('click', function(){
    $('.searched_users').show();
    $('.searched_articles').hide();
  });
});
</script>

</br>
<table>
  <% @articles.each do |article| %>
    <% if article.is_a?(Article) %>
      <tr class = "searched_articles">
        <td><%= link_to article.user.name, user_path(article.user.id) %></td>
        <td><%= article.title %></td>
        <td><%= render_with_hashtags(article.hashtag) %></td>
        <td><%== article.content.truncate(10) %></td>
        <td><%= article.impressionist_count %>PV</td>
        <td><%= link_to '詳細を確認する', article_path(article.id) %></td>
        <td>
          <div id="favorite_btn_<%= article.id %>">
            <%= render partial: "favorites/favorite", locals: {article: article} %>
          </div>
        </td>
      </tr>
    <% else %>
    <% user_for_searching = article %>
    <tr class = "searched_users">
      <td><%= link_to user_for_searching.name, user_path(id: user_for_searching.id ) %></td>
      <td><%= user_for_searching.introduce_message %></td>
      <% if user_for_searching != current_user %>
        <td><%= render 'users/follow_form', user: user_for_searching %></td>
      <% end %>
    </tr>
    <% end %>
  <% end %>
</table>
